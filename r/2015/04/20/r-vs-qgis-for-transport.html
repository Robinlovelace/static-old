<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>R vs QGIS for sustainable transport planning</title>
    <meta name="description" content="environmental geographer, transport modeller, energy researcher
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://robinlovelace.net/r/2015/04/20/r-vs-qgis-for-transport.html">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Robin Lovelace</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about">About Robin Lovelace</a>
          
        
          
        
          
          <a class="page-link" href="/book-reviews">Book reviews</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/sketches/foss4g-2014-r-abstract">FOSS4G-E Abstract</a>
          
        
          
          <a class="page-link" href="/hardware">Hardware</a>
          
        
          
          <a class="page-link" href="/ideas">Ideas</a>
          
        
          
        
          
          <a class="page-link" href="/influential-geographers">Influential geographers</a>
          
        
          
        
          
          <a class="page-link" href="/software/pandoc">Pandoc</a>
          
        
          
          <a class="page-link" href="/presentations">Presentations</a>
          
        
          
          <a class="page-link" href="/publications">Publications</a>
          
        
          
          <a class="page-link" href="/quotes">Quotes</a>
          
        
          
          <a class="page-link" href="/software">Software</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">R vs QGIS for sustainable transport planning</h1>
    <p class="post-meta">Apr 20, 2015</p>
  </header>

  <article class="post-content">
    <p>The 23rd iteration of the GIS Research UK conference
(<a href="https://github.com/Robinlovelace/stplanr">#GISRUK</a>)
conference was the largest ever. 250 researchers,
industry representatives and academics attended from the
vibrant geospatial research communities in the
UK, Europe and beyond. GISRUK has become a centrepoint for discussion
of new methods, software and applications in the field. I
was on the <a href="http://leeds.gisruk.org/contact.html">organising committee</a>,
reviewed some excellent papers for the event
(a full list of these is
<a href="http://leeds.gisruk.org/programme.html">available for download here</a>) and 
attended some truly ground-breaking talks.
This experience has shown that the geospatial community
in the UK is strong,
especially with regards to growth in open access
data and open source software in the field.</p>

<p><a href="https://www.flickr.com/photos/97888609@N02/17025120518" title="img_2814 by Robin Lovelace, on Flickr"><img src="https://farm6.staticflickr.com/5450/17025120518_ebfba47bff_s.jpg" width="75" height="75" alt="img_2814" /></a></p>

<!--more-->

<p>This article is about one part of GISRUK and insights gleaned from it
about R, QGIS and other tools for sustainable transport planning.
<a href="https://github.com/Robinlovelace/GIS4TA">GIS for Transport Applications</a>
(<a href="https://twitter.com/hashtag/gis4ta?src=hash">#GIS4TA for short</a>) was a practical day-long workshop
that preceded the main event.
I organised the workshop and (with help from
<a href="http://www.geog.leeds.ac.uk/people/e.odiari">Eusebio Odiari</a>,
<a href="https://tgrg.wordpress.com/">The Transport Geography Research Group</a>
and the
<a href="http://www.rgs.org/HomePage.htm">Royal Geographical Society</a>)
it seems to have been a great success. More than 30
people attended, including a decent portion
from transport consultancies such as
<a href="http://www.itpworld.net/index.html">Integrated Transport Planning Ltd</a>
<a href="http://www.trpconsult.com/">TRP Consulting</a> and the
<a href="http://www.era.europa.eu/Pages/Home.aspx">European Railway Association (ERA)</a>.
Specifically, it is about the use of R
and QGIS tools for transport planning and the potential for their
adoption in academic, public and private-sector transport planning.
The focus of the workshop was deliberately on open source software
and sustainable transport because these are growth
areas in the field that are essential for
democratic
and healthy
transport systems compatible with the
science of climate change (<a href="http://www.opentraffic.net/en/"><span class="citation">Tamminga, 2012</span></a>).
A recent report, for example, suggests we need to almost completely
transition away from fossil fuels by 2050
(<a href="http://dx.doi.org/10.1038/nature14016">McGlade et al., 2015</a>).
New datasets and methods for analysing and modelling them can
help get us there in the recalcitrant transport sector
(<a href="http://dx.doi.org/10.1016/j.jtrangeo.2014.07.010">Gossling, 2014</a>).</p>

<h1 id="r-for-transport-applications">R for transport applications</h1>

<p>The workshop kicked-off with a short
talk on ‘R and QGIS for transport applications’,
which laid out some of the motivations for running the
workshop outlined above. Other than a few
‘early adopters’, the transport modelling community
is generally conservative, based largely on mature
proprietary products such as
<a href="http://www.saturnsoftware.co.uk/7.html">SATURN</a>
and 
<a href="http://vision-traffic.ptvgroup.com/en-us/products/ptv-vissim/">Vissim</a>.</p>

<p>The slides from this talk are available here:</p>

<script async="" class="speakerdeck-embed" data-id="91fce9cf5c36405b8969c6b6954c4fe6" data-ratio="1.41436464088398" src="//speakerdeck.com/assets/embed.js"></script>

<p><strong>Tutorial: <a href="https://github.com/Robinlovelace/GIS4TA/releases/download/0.1/intro-r-qgis-4ta.pdf">Introduction to R and QGIS for transport applications</a></strong></p>

<h1 id="routing-with-r">Routing with R</h1>

<p>The second talk was by Nick Bearman, who provided an overview of
routing in R, as well as an excellent
<a href="https://github.com/nickbearman/transport-workshop/blob/master/transport-workshop.pdf">practical tutorial</a>.</p>

<p>The practical demonstrated 2 ways of routing in R:</p>

<ol>
  <li>Using <strong>ggmap</strong>. The following code was used to navigate to the event!</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>from &lt;- 'Leeds station, New Station Street, Leeds LS1 5DL, United Kingdom'
to &lt;- 'LS2 9JT'
route_df &lt;- route(from, to, structure = 'route', mode = 'walking')
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>qmap('Merrion Centre', zoom = 15) +
  geom_path(
    aes(x = lon, y = lat),  colour = 'red', size = 1.5,
    data = route_df, lineend = 'round')
</code></pre>
</div>

<p><img src="https://github.com/Robinlovelace/robinlovelace.github.io/raw/master/_posts/writeup_files/figure-html/unnamed-chunk-2-1.png" alt="" /></p>

<ol>
  <li>The <a href="https://github.com/Robinlovelace/stplanr">package I created, <strong>stplanr</strong></a>,
to get routes optimised for cyclists (see <a href="https://github.com/nickbearman/transport-workshop/blob/master/transport-workshop.Rmd">transport-workshop.Rmd</a> for a working version):</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>rquiet &lt;- gLines2CyclePath(l = rlines, plan = "quietest")
plot(rquiet[1,]) # route from Leeds station to Leeds University (North - South)
plot(rquiet[2,]) # route from Leeds to Manchester!
</code></pre>
</div>

<p><img src="https://github.com/Robinlovelace/robinlovelace.github.io/raw/master/_posts/writeup_files/figure-html/unnamed-chunk-4-1.png" alt="" /></p>

<p><strong>Tutorial: <a href="https://github.com/nickbearman/transport-workshop/blob/master/transport-workshop.pdf">Route analysis using R</a></strong></p>

<h1 id="large-gps-datasets-with-postgis">Large gps datasets with PostGIS</h1>

<p>The most technical session involved using R to query huge datasets storing
GPS data containing 100,000+ rows. Amazingly, Richard and Adrian Ellison
set up a remotely accessible database instance <strong>from their laptop</strong> which
participants queried via
<a href="http://cran.r-project.org/web/packages/RPostgreSQL/index.html"><strong>RPostgreSQL</strong></a>.
Their session information can be seen here:</p>

<p><a href="https://github.com/richardellison/GIS4TA_GPS"><strong>github.com/richardellison/GIS4TA_GPS</strong></a></p>

<h1 id="a-hackathon">A hackathon</h1>

<p>Finally there was a miniature hackathon organised by Godwin Yeboah.
Participants made progress in better understanding the travel
patterns of cyclists using real data. The hackathon notes can be found here:</p>

<p><a href="https://github.com/spatialscientist/GIS4TA2015">github.com/spatialscientist/GIS4TA2015</a></p>

<h1 id="summary">Summary</h1>

<p>GIS is a field of knowledge that has a huge amount to offer transport 
planners and researchers, especially regarding new and open source
software tools that can effectively generate, process and analyse 
transport-related data. R is well-suited to fill this research gap and
has a wide range of tools to help. Packages such as <strong>ggmap</strong>
(Kahle and Wickham 2013),
<strong>RPostgreSQL</strong>
and the new <a href="https://github.com/Robinlovelace/stplanr"><strong>stplanr</strong></a>
have great potential to help plan the transport systems of the future.
QGIS is also increasingly attractive for transport applications, with
it inbuilt support for
<a href="http://planet.qgis.org/planet/tag/pgrouting/">PGRouting</a>, 
<a href="http://plugins.qgis.org/plugins/FlowMapper/">flow analysis</a>
and a friendly user interface that many will be used to.</p>

<p>Photos taken during the hackathon are testament to its role as a forum
for not only learning but also debate about the future of GIS in transport.
These can be seen here:</p>

<p><a href="https://www.flickr.com/photos/97888609@N02/sets/72157652012715766">flickr.com/photos/97888609@N02/sets/72157652012715766</a></p>

<p>Hearing feedback from users new to R using it to solve transport problems
provided an insight into how it compares to traditional tools. The removal
of ‘glass ceilings’ imposed by restrictive licenses or the need to buy
‘add-on’ features was one comment, but that applies equally to QGIS and
other <a href="http://foss4g.org/">FOSS4G</a>
offerings. The steep learning curve of R seems to still
be an issue compared with QGIS, although this is becoming less of an issue
with the evolution of RStudio as an GUI for R. In conclusion, both R and
QGIS are coming of age as tools in the transport planner’s ‘war cabinet’.
The latest evidence unequivocally shows the impact of transport decisions
on obesity, environmental degradation and quality of life. So it is time,
surely, to harness this new open source software to ‘save the world’!</p>

<h1 id="acknowledgements">Acknowledgements</h1>

<p>Thanks to the Consumer Data Research Centre and the Royal Geographical
society for subsidising the event. Thanks to all the participants and
especially the demonstrators Godwin, Nick, Adrian and Richard for making it
happen.</p>

<h1 id="references">References</h1>

<p>Gössling, Stefan, and Scott Cohen. 2014. “Why sustainable transport policies will fail: EU climate policy in the light of transport taboos.” Journal of Transport Geography 39 (July). Elsevier Ltd: 197–207. doi:10.1016/j.jtrangeo.2014.07.010.</p>

<p>Kahle, D, and Hadley Wickham. 2013. “ggmap: Spatial Visualization with ggplot2.” The R Journal 5: 144–61. <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.375.8693&amp;rep=rep1&amp;type=pdf">citeseerx.ist.psu.edu</a>.</p>

<p>McGlade, Christophe, and Paul Ekins. 2015. “The geographical distribution of fossil fuels unused when limiting global warming to 2 °C.” Nature 517 (7533). Nature Publishing Group: 187–90. doi:10.1038/nature14016.</p>

<p>Tamminga, Guus, Marc Miska, Edgar Santos, Hans van Lint, Arturo Nakasone, Helmut Prendinger, and Serge Hoogendoorn. 2012. “Design of Open Source Framework for Traffic and Travel Simulation.” Transportation Research Record: Journal of the Transportation Research Board 2291 (-1): 44–52. doi:10.3141/2291-06.</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Robin Lovelace</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Robin Lovelace</li>
          <li><a href="mailto:rob00x@gmail.com">rob00x@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/robinlovelace">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">robinlovelace</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/robinlovelace">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">robinlovelace</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">environmental geographer, transport modeller, energy researcher
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
